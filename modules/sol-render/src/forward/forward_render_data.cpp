#include "sol-render/forward/forward_render_data.h"

////////////////////////////////////////////////////////////////
// Standard includes.
////////////////////////////////////////////////////////////////

#include <ranges>

////////////////////////////////////////////////////////////////
// Module includes.
////////////////////////////////////////////////////////////////

#include "sol-material/forward/forward_material.h"

namespace sol
{
    ////////////////////////////////////////////////////////////////
    // Constructors.
    ////////////////////////////////////////////////////////////////

    ForwardRenderData::ForwardRenderData() = default;

    ForwardRenderData::~ForwardRenderData() noexcept = default;

    ////////////////////////////////////////////////////////////////
    // ...
    ////////////////////////////////////////////////////////////////

    void ForwardRenderData::clear()
    {
        drawables.clear();
        materialInstances.clear();
        pushConstantRanges.clear();
        pushConstantData.clear();
    }

    ////////////////////////////////////////////////////////////////
    // Sorting.
    ////////////////////////////////////////////////////////////////

    void ForwardRenderData::sortDrawablesByLayer()
    {
        std::ranges::sort(drawables, [](const Drawable& lhs, const Drawable& rhs) {
            return lhs.material->getLayer() < rhs.material->getLayer();
        });
    }

}  // namespace sol
