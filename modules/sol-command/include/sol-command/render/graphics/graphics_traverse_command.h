#pragma once

////////////////////////////////////////////////////////////////
// Module includes.
////////////////////////////////////////////////////////////////

#include "sol-render/graphics/fwd.h"
#include "sol-scenegraph/fwd.h"

////////////////////////////////////////////////////////////////
// Current target includes.
////////////////////////////////////////////////////////////////

#include "sol-command/i_command.h"

namespace sol
{
    class GraphicsTraverseCommand final : public ICommand
    {
    public:
        ////////////////////////////////////////////////////////////////
        // Constructors.
        ////////////////////////////////////////////////////////////////

        GraphicsTraverseCommand();

        GraphicsTraverseCommand(const GraphicsTraverseCommand&) = delete;

        GraphicsTraverseCommand(GraphicsTraverseCommand&&) = delete;

        ~GraphicsTraverseCommand() noexcept override;

        GraphicsTraverseCommand& operator=(const GraphicsTraverseCommand&) = delete;

        GraphicsTraverseCommand& operator=(GraphicsTraverseCommand&&) = delete;

        ////////////////////////////////////////////////////////////////
        // Getters.
        ////////////////////////////////////////////////////////////////

        [[nodiscard]] GraphicsTraverser* getTraverser() const noexcept;

        [[nodiscard]] Scenegraph* getScenegraph() const noexcept;

        ////////////////////////////////////////////////////////////////
        // Setters.
        ////////////////////////////////////////////////////////////////

        void setRenderData(GraphicsRenderData& data);

        void setTraverser(GraphicsTraverser& traverse);

        void setScenegraph(Scenegraph& graph);

        ////////////////////////////////////////////////////////////////
        // Run.
        ////////////////////////////////////////////////////////////////

        void finalize() override;

        void operator()() override;

        ////////////////////////////////////////////////////////////////
        // Debugging and visualization.
        ////////////////////////////////////////////////////////////////

        [[nodiscard]] std::string getVizLabel() const override;

    private:
        ////////////////////////////////////////////////////////////////
        // Member variables.
        ////////////////////////////////////////////////////////////////

        GraphicsRenderData* renderData = nullptr;

        GraphicsTraverser* traverser = nullptr;

        Scenegraph* scenegraph = nullptr;
    };
}  // namespace sol